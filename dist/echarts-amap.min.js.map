{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///echarts-amap.min.js","webpack:///webpack/bootstrap 1bcee7f10eea3bc253d2","webpack:///external \"echarts\"","webpack:///./src/AMapCoordSys.js","webpack:///./src/AMapModel.js","webpack:///./src/AMapView.js","webpack:///./src/amap.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","AMapCoordSys","amap","api","_amap","dimensions","_mapOffset","_api","echarts","setZoom","zoom","_zoom","setCenter","center","_center","lnglatToPixel","setMapOffset","mapOffset","getAMap","dataToPoint","data","point","AMap","LngLat","px","lngLatToContainer","x","y","pointToData","pt","containerToLngLat","lng","lat","getViewRect","graphic","BoundingRect","getWidth","getHeight","getRoamTransform","matrix","create","ecModel","amapCoordSys","getDom","eachComponent","amapModel","viewportRoot","getZr","painter","getViewportRoot","Error","__amap","amapRoot","querySelector","style","left","top","removeChild","document","createElement","cssText","classList","add","appendChild","options","__options","util","clone","Map","layer","__layer","CustomLayer","setMap","getLayer","hide","getZoom","getCenter","__mapOffset","coordinateSystem","show","eachSeries","seriesModel","v2Equal","a","b","extendComponentModel","type","getMapOptions","setCenterAndZoom","option","centerOrZoomChanged","defaultOption","throttle","fn","time","context","lock","args","wrapperFn","later","apply","arguments","setTimeout","extendComponentView","render","aMapModel","zoomEndHandler","rendering","dispatchAction","resizeHandler","e","resize","moveHandler","coordSys","offsetEl","parentNode","parseInt","throttledResizeHandler","off","_oldMoveHandler","_oldZoomEndHandler","_oldResizeHandler","on","registerCoordinateSystem","registerAction","event","update","payload","version"],"mappings":"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","file":"echarts-amap.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"echarts\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"echarts\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"amap\"] = factory(require(\"echarts\"));\n\telse\n\t\troot[\"echarts\"] = root[\"echarts\"] || {}, root[\"echarts\"][\"amap\"] = factory(root[\"echarts\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"echarts\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"echarts\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"amap\"] = factory(require(\"echarts\"));\n\telse\n\t\troot[\"echarts\"] = root[\"echarts\"] || {}, root[\"echarts\"][\"amap\"] = factory(root[\"echarts\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar echarts = __webpack_require__(0);\n\nfunction AMapCoordSys(amap, api) {\n  this._amap = amap;\n  this.dimensions = ['lng', 'lat'];\n  this._mapOffset = [0, 0];\n\n  this._api = api;\n}\n\nAMapCoordSys.prototype.dimensions = ['lng', 'lat'];\n\nAMapCoordSys.prototype.setZoom = function (zoom) {\n  this._zoom = zoom;\n};\n\nAMapCoordSys.prototype.setCenter = function (center) {\n  this._center = this._amap.lnglatToPixel(center);//, 10)\n};\n\nAMapCoordSys.prototype.setMapOffset = function (mapOffset) {\n  this._mapOffset = mapOffset;\n};\n\nAMapCoordSys.prototype.getAMap = function () {\n  return this._amap;\n};\n\nAMapCoordSys.prototype.dataToPoint = function (data) {\n  var point = new AMap.LngLat(data[0], data[1]);\n  var px = this._amap.lngLatToContainer(point);//, this._zoom);\n  var mapOffset = this._mapOffset;\n  return [px.x - mapOffset[0], px.y - mapOffset[1]];\n};\n\nAMapCoordSys.prototype.pointToData = function (pt) {\n  var mapOffset = this._mapOffset;\n  var pt = this._amap.containerToLngLat({\n    x: pt[0] + mapOffset[0],\n    y: pt[1] + mapOffset[1]\n  });\n  return [pt.lng, pt.lat];\n};\n\nAMapCoordSys.prototype.getViewRect = function () {\n  var api = this._api;\n  return new echarts.graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight());\n};\n\nAMapCoordSys.prototype.getRoamTransform = function () {\n  return echarts.matrix.create();\n};\n\nvar Overlay;\n\n// For deciding which dimensions to use when creating list data\nAMapCoordSys.dimensions = AMapCoordSys.prototype.dimensions;\n\nAMapCoordSys.create = function (ecModel, api) {\n  var amapCoordSys;\n  var root = api.getDom();\n\n  // TODO Dispose\n  ecModel.eachComponent('amap', function (amapModel) {\n    var viewportRoot = api.getZr().painter.getViewportRoot();\n    if (typeof AMap === 'undefined') {\n      throw new Error('AMap api is not loaded');\n    }\n\n    if (amapCoordSys) {\n      throw new Error('Only one amap component can exist');\n    }\n    if (!amapModel.__amap) {\n      // Not support IE8\n      var amapRoot = root.querySelector('.ec-extension-amap');\n      if (amapRoot) {\n          // Reset viewport left and top, which will be changed\n          // in moving handler in AMapView\n          viewportRoot.style.left = '0px';\n          viewportRoot.style.top = '0px';\n          root.removeChild(amapRoot);\n      }\n      amapRoot = document.createElement('div');\n      amapRoot.style.cssText = 'width:100%;height:100%';\n      // Not support IE8\n      amapRoot.classList.add('ec-extension-amap');\n      root.appendChild(amapRoot);\n\n      var options = amapModel.get() || {};\n      options = amapModel.__options = echarts.util.clone(options);\n      var amap = amapModel.__amap = new AMap.Map(amapRoot, options);\n\n      var layer = amapModel.__layer = new AMap.CustomLayer(viewportRoot);\n      layer.setMap(amap);\n    }\n    var amap = amapModel.getAMap();\n    var layer = amapModel.getLayer();\n    layer.hide();\n\n    var zoom = amap.getZoom();\n    var center = amap.getCenter();\n\n    amapCoordSys = new AMapCoordSys(amap, api);\n    amapCoordSys.setMapOffset(amapModel.__mapOffset || [0, 0]);\n    amapCoordSys.setZoom(zoom);\n    amapCoordSys.setCenter([center.lng, center.lat]);\n\n    amapModel.coordinateSystem = amapCoordSys;\n    layer.show();\n  });\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'amap') {\n      seriesModel.coordinateSystem = amapCoordSys;\n    }\n  });\n};\n\nmodule.exports = AMapCoordSys;\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction v2Equal(a, b) {\n  return a && b && a[0] === b[0] && a[1] === b[1];\n}\n\nmodule.exports = __webpack_require__(0).extendComponentModel({\n  type: 'amap',\n\n  getAMap: function () {\n    // __amap is injected when creating AMapCoordSys\n    return this.__amap;\n  },\n\n  getLayer: function() {\n    // __layer is injected when creating AMapCoordSys\n    return this.__layer;\n  },\n\n  getMapOptions: function() {\n    return this.__options;\n  },\n\n  setCenterAndZoom: function (center, zoom) {\n    this.option.center = center;\n    this.option.zoom = zoom;\n  },\n\n  centerOrZoomChanged: function (center, zoom) {\n    var option = this.option;\n    return !(v2Equal(center, option.center) && zoom === option.zoom);\n  },\n\n  defaultOption: {\n    center: [116.397475,39.908695],\n    zoom: 4,\n  }\n});\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction throttle(fn, time, context) {\n\tvar lock, args, wrapperFn, later;\n\n\tlater = function () {\n\t\t// reset lock and call if queued\n\t\tlock = false;\n\t\tif (args) {\n\t\t\twrapperFn.apply(context, args);\n\t\t\targs = false;\n\t\t}\n\t};\n\n\twrapperFn = function () {\n\t\tif (lock) {\n\t\t\t// called too soon, queue to call later\n\t\t\targs = arguments;\n\n\t\t} else {\n\t\t\t// call and lock until later\n\t\t\tfn.apply(context, arguments);\n\t\t\tsetTimeout(later, time);\n\t\t\tlock = true;\n\t\t}\n\t};\n\n\treturn wrapperFn;\n}\n\nmodule.exports = __webpack_require__(0).extendComponentView({\n  type: 'amap',\n\n  render: function (aMapModel, ecModel, api) {\n    var rendering = true;\n\n    var amap = aMapModel.getAMap();\n    var viewportRoot = api.getZr().painter.getViewportRoot();\n    var coordSys = aMapModel.coordinateSystem;\n    var moveHandler = function (e) {\n      if (rendering) {\n          return;\n      }\n      var offsetEl = viewportRoot.parentNode.parentNode.parentNode;\n      var mapOffset = [\n          -parseInt(offsetEl.style.left, 10) || 0,\n          -parseInt(offsetEl.style.top, 10) || 0\n      ];\n      viewportRoot.style.left = mapOffset[0] + 'px';\n      viewportRoot.style.top = mapOffset[1] + 'px';\n\n      coordSys.setMapOffset(mapOffset);\n      aMapModel.__mapOffset = mapOffset;\n\n      api.dispatchAction({\n          type: 'amapRoam'\n      });\n    };\n\n    function zoomEndHandler() {\n      if (rendering) {\n          return;\n      }\n      api.dispatchAction({\n          type: 'amapRoam'\n      });\n    }\n\n    function resizeHandler(e) {\n      api.getZr().resize();\n      moveHandler.call(this, e)\n    }\n\n    var throttledResizeHandler = throttle(resizeHandler, 300, amap);\n\n    amap.off('movestart', this._oldMoveHandler);\n    amap.off('zoomend', this._oldZoomEndHandler);\n    amap.off('moveend', this._oldZoomEndHandler);\n    amap.off('complete', this._oldZoomEndHandler);\n    aMapModel.get('resizeEnable') && amap.off('resize', this._oldResizeHandler);\n\n    amap.on('movestart', moveHandler);\n    amap.on('zoomend', zoomEndHandler);\n    amap.on('moveend', zoomEndHandler);\n    amap.on('complete', zoomEndHandler);\n    aMapModel.get('resizeEnable') && amap.on('resize', throttledResizeHandler);\n\n    this._oldMoveHandler = moveHandler;\n    this._oldZoomEndHandler = zoomEndHandler;\n    this._oldResizeHandler = throttledResizeHandler;\n\n    // var roam = aMapModel.get('roam');\n    // if (roam && roam !== 'scale') {\n    //     amap.enableDragging();\n    // }\n    // else {\n    //     amap.disableDragging();\n    // }\n    // if (roam && roam !== 'move') {\n    //     amap.enableScrollWheelZoom();\n    //     amap.enableDoubleClickZoom();\n    //     amap.enablePinchToZoom();\n    // }\n    // else {\n    //     amap.disableScrollWheelZoom();\n    //     amap.disableDoubleClickZoom();\n    //     amap.disablePinchToZoom();\n    // }\n\n    rendering = false;\n  }\n});\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n * BMap component extension\n */\n__webpack_require__(0).registerCoordinateSystem(\n  'amap', __webpack_require__(1)\n);\n__webpack_require__(2);\n__webpack_require__(3);\n\n// Action\n__webpack_require__(0).registerAction({\n  type: 'amapRoam',\n  event: 'amapRoam',\n  update: 'updateLayout'\n}, function (payload, ecModel) {\n  ecModel.eachComponent('amap', function (aMapModel) {\n    var amap = aMapModel.getAMap();\n    var center = amap.getCenter();\n    aMapModel.setCenterAndZoom([center.lng, center.lat], amap.getZoom());\n  });\n});\n\nmodule.exports = {\n  version: \"1.0.0-rc.5\"\n};\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// echarts-amap.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 1bcee7f10eea3bc253d2","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"echarts\"\n// module id = 0\n// module chunks = 0","var echarts = require('echarts');\n\nfunction AMapCoordSys(amap, api) {\n  this._amap = amap;\n  this.dimensions = ['lng', 'lat'];\n  this._mapOffset = [0, 0];\n\n  this._api = api;\n}\n\nAMapCoordSys.prototype.dimensions = ['lng', 'lat'];\n\nAMapCoordSys.prototype.setZoom = function (zoom) {\n  this._zoom = zoom;\n};\n\nAMapCoordSys.prototype.setCenter = function (center) {\n  this._center = this._amap.lnglatToPixel(center);//, 10)\n};\n\nAMapCoordSys.prototype.setMapOffset = function (mapOffset) {\n  this._mapOffset = mapOffset;\n};\n\nAMapCoordSys.prototype.getAMap = function () {\n  return this._amap;\n};\n\nAMapCoordSys.prototype.dataToPoint = function (data) {\n  var point = new AMap.LngLat(data[0], data[1]);\n  var px = this._amap.lngLatToContainer(point);//, this._zoom);\n  var mapOffset = this._mapOffset;\n  return [px.x - mapOffset[0], px.y - mapOffset[1]];\n};\n\nAMapCoordSys.prototype.pointToData = function (pt) {\n  var mapOffset = this._mapOffset;\n  var pt = this._amap.containerToLngLat({\n    x: pt[0] + mapOffset[0],\n    y: pt[1] + mapOffset[1]\n  });\n  return [pt.lng, pt.lat];\n};\n\nAMapCoordSys.prototype.getViewRect = function () {\n  var api = this._api;\n  return new echarts.graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight());\n};\n\nAMapCoordSys.prototype.getRoamTransform = function () {\n  return echarts.matrix.create();\n};\n\nvar Overlay;\n\n// For deciding which dimensions to use when creating list data\nAMapCoordSys.dimensions = AMapCoordSys.prototype.dimensions;\n\nAMapCoordSys.create = function (ecModel, api) {\n  var amapCoordSys;\n  var root = api.getDom();\n\n  // TODO Dispose\n  ecModel.eachComponent('amap', function (amapModel) {\n    var viewportRoot = api.getZr().painter.getViewportRoot();\n    if (typeof AMap === 'undefined') {\n      throw new Error('AMap api is not loaded');\n    }\n\n    if (amapCoordSys) {\n      throw new Error('Only one amap component can exist');\n    }\n    if (!amapModel.__amap) {\n      // Not support IE8\n      var amapRoot = root.querySelector('.ec-extension-amap');\n      if (amapRoot) {\n          // Reset viewport left and top, which will be changed\n          // in moving handler in AMapView\n          viewportRoot.style.left = '0px';\n          viewportRoot.style.top = '0px';\n          root.removeChild(amapRoot);\n      }\n      amapRoot = document.createElement('div');\n      amapRoot.style.cssText = 'width:100%;height:100%';\n      // Not support IE8\n      amapRoot.classList.add('ec-extension-amap');\n      root.appendChild(amapRoot);\n\n      var options = amapModel.get() || {};\n      options = amapModel.__options = echarts.util.clone(options);\n      var amap = amapModel.__amap = new AMap.Map(amapRoot, options);\n\n      var layer = amapModel.__layer = new AMap.CustomLayer(viewportRoot);\n      layer.setMap(amap);\n    }\n    var amap = amapModel.getAMap();\n    var layer = amapModel.getLayer();\n    layer.hide();\n\n    var zoom = amap.getZoom();\n    var center = amap.getCenter();\n\n    amapCoordSys = new AMapCoordSys(amap, api);\n    amapCoordSys.setMapOffset(amapModel.__mapOffset || [0, 0]);\n    amapCoordSys.setZoom(zoom);\n    amapCoordSys.setCenter([center.lng, center.lat]);\n\n    amapModel.coordinateSystem = amapCoordSys;\n    layer.show();\n  });\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'amap') {\n      seriesModel.coordinateSystem = amapCoordSys;\n    }\n  });\n};\n\nmodule.exports = AMapCoordSys;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/AMapCoordSys.js\n// module id = 1\n// module chunks = 0","function v2Equal(a, b) {\n  return a && b && a[0] === b[0] && a[1] === b[1];\n}\n\nmodule.exports = require('echarts').extendComponentModel({\n  type: 'amap',\n\n  getAMap: function () {\n    // __amap is injected when creating AMapCoordSys\n    return this.__amap;\n  },\n\n  getLayer: function() {\n    // __layer is injected when creating AMapCoordSys\n    return this.__layer;\n  },\n\n  getMapOptions: function() {\n    return this.__options;\n  },\n\n  setCenterAndZoom: function (center, zoom) {\n    this.option.center = center;\n    this.option.zoom = zoom;\n  },\n\n  centerOrZoomChanged: function (center, zoom) {\n    var option = this.option;\n    return !(v2Equal(center, option.center) && zoom === option.zoom);\n  },\n\n  defaultOption: {\n    center: [116.397475,39.908695],\n    zoom: 4,\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/AMapModel.js\n// module id = 2\n// module chunks = 0","function throttle(fn, time, context) {\n\tvar lock, args, wrapperFn, later;\n\n\tlater = function () {\n\t\t// reset lock and call if queued\n\t\tlock = false;\n\t\tif (args) {\n\t\t\twrapperFn.apply(context, args);\n\t\t\targs = false;\n\t\t}\n\t};\n\n\twrapperFn = function () {\n\t\tif (lock) {\n\t\t\t// called too soon, queue to call later\n\t\t\targs = arguments;\n\n\t\t} else {\n\t\t\t// call and lock until later\n\t\t\tfn.apply(context, arguments);\n\t\t\tsetTimeout(later, time);\n\t\t\tlock = true;\n\t\t}\n\t};\n\n\treturn wrapperFn;\n}\n\nmodule.exports = require('echarts').extendComponentView({\n  type: 'amap',\n\n  render: function (aMapModel, ecModel, api) {\n    var rendering = true;\n\n    var amap = aMapModel.getAMap();\n    var viewportRoot = api.getZr().painter.getViewportRoot();\n    var coordSys = aMapModel.coordinateSystem;\n    var moveHandler = function (e) {\n      if (rendering) {\n          return;\n      }\n      var offsetEl = viewportRoot.parentNode.parentNode.parentNode;\n      var mapOffset = [\n          -parseInt(offsetEl.style.left, 10) || 0,\n          -parseInt(offsetEl.style.top, 10) || 0\n      ];\n      viewportRoot.style.left = mapOffset[0] + 'px';\n      viewportRoot.style.top = mapOffset[1] + 'px';\n\n      coordSys.setMapOffset(mapOffset);\n      aMapModel.__mapOffset = mapOffset;\n\n      api.dispatchAction({\n          type: 'amapRoam'\n      });\n    };\n\n    function zoomEndHandler() {\n      if (rendering) {\n          return;\n      }\n      api.dispatchAction({\n          type: 'amapRoam'\n      });\n    }\n\n    function resizeHandler(e) {\n      api.getZr().resize();\n      moveHandler.call(this, e)\n    }\n\n    var throttledResizeHandler = throttle(resizeHandler, 300, amap);\n\n    amap.off('movestart', this._oldMoveHandler);\n    amap.off('zoomend', this._oldZoomEndHandler);\n    amap.off('moveend', this._oldZoomEndHandler);\n    amap.off('complete', this._oldZoomEndHandler);\n    aMapModel.get('resizeEnable') && amap.off('resize', this._oldResizeHandler);\n\n    amap.on('movestart', moveHandler);\n    amap.on('zoomend', zoomEndHandler);\n    amap.on('moveend', zoomEndHandler);\n    amap.on('complete', zoomEndHandler);\n    aMapModel.get('resizeEnable') && amap.on('resize', throttledResizeHandler);\n\n    this._oldMoveHandler = moveHandler;\n    this._oldZoomEndHandler = zoomEndHandler;\n    this._oldResizeHandler = throttledResizeHandler;\n\n    // var roam = aMapModel.get('roam');\n    // if (roam && roam !== 'scale') {\n    //     amap.enableDragging();\n    // }\n    // else {\n    //     amap.disableDragging();\n    // }\n    // if (roam && roam !== 'move') {\n    //     amap.enableScrollWheelZoom();\n    //     amap.enableDoubleClickZoom();\n    //     amap.enablePinchToZoom();\n    // }\n    // else {\n    //     amap.disableScrollWheelZoom();\n    //     amap.disableDoubleClickZoom();\n    //     amap.disablePinchToZoom();\n    // }\n\n    rendering = false;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/AMapView.js\n// module id = 3\n// module chunks = 0","/**\n * BMap component extension\n */\nrequire('echarts').registerCoordinateSystem(\n  'amap', require('./AMapCoordSys')\n);\nrequire('./AMapModel');\nrequire('./AMapView');\n\n// Action\nrequire('echarts').registerAction({\n  type: 'amapRoam',\n  event: 'amapRoam',\n  update: 'updateLayout'\n}, function (payload, ecModel) {\n  ecModel.eachComponent('amap', function (aMapModel) {\n    var amap = aMapModel.getAMap();\n    var center = amap.getCenter();\n    aMapModel.setCenterAndZoom([center.lng, center.lat], amap.getZoom());\n  });\n});\n\nmodule.exports = {\n  version: process.env.VERSION\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/amap.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}